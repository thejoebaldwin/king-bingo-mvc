@{

    Layout = null;
    var games = ViewBag.Games;
    var users = ViewBag.Users;
    var gameCount = 0;
    var userCount = 0;
    var numbers = ViewBag.Numbers;
    var number = ViewBag.Number;
    var timestamp = ViewBag.Timestamp;
    var user = ViewBag.User;
}

{
    "status": "@ViewBag.Status",
    "command": "@ViewBag.Command",
    "message": "@ViewBag.Message",  
    @if (numbers != null)
    {
         @String.Format("\"numbers\": \"{0}\",", numbers)
    }
    @if (number != null)
    {
         @String.Format("\"number\": \"{0}\",", number)
    }
    @if (timestamp != null)
    {
         @String.Format("\"timestamp\": \"{0}\",", timestamp)
    }
    @if (user != null)
    {
            @Html.Raw("\"user\":{")
            @String.Format("\"user_id\": \"{0}\",", user.UserId)
            @String.Format("\"username\": \"{0}\",", user.UserName)
            @String.Format("\"name\": \"{0}\",", user.Name)
            @String.Format("\"bio\": \"{0}\",", user.Bio)
            @String.Format("\"Email\": \"{0}\",", user.Email)
            @String.Format("\"created\": \"{0}\",", user.Created)
            @String.Format("\"device_token\": \"{0}\",", user.DeviceToken)
            @String.Format("\"zip\": \"{0}\",", user.Zip)
            @String.Format("\"birthdate\": \"{0}\",", user.Birthdate)
            @String.Format("\"receive_emails\": \"{0}\",", user.ReceiveEmails)
            @String.Format("\"authentication_token\": \"{0}\",", user.AuthenticationToken)
            @String.Format("\"authentication_token_expires\": \"{0}\",", user.AuthenticationTokenExpires)
        if (user.ProfileImage != null)
        {
            @String.Format("\"profile_image\": \"{0}\",", user.ProfileImage)
    }

            @String.Format("\"active\": \"{0}\",", user.Active)
            @String.Format("\"sex\": \"{0}\",", user.Sex)
       
            @String.Format("\"confirmed\": \"{0}\",", user.Confirmed)
        if (user.Location != null)
        {
            @String.Format("\"location\": \"{0}\",", user.Location)
    }
            @Html.Raw("},")
    }
    "users":[  
    @if (users != null)
    {
        foreach(var u in users) 
        {
            if (userCount > 0) 
            {
                @Html.Raw(",")
            }
            @Html.Raw("{")
            @String.Format("\"user_id\": \"{0}\",", u.UserId)
            @String.Format("\"username\": \"{0}\",", u.UserName)
            @String.Format("\"name\": \"{0}\",", u.Name)
            @String.Format("\"bio\": \"{0}\",", u.Bio)
            userCount++;
            @Html.Raw("}")
        }
    }
    ],
    "games":[  
    @if (games != null)
    {
        foreach(var g in games) 
        {
            if (gameCount > 0) 
            {
                @Html.Raw(",")
            }
            @Html.Raw("{")
            @String.Format("\"game_id\": \"{0}\",", g.GameID)
            @String.Format("\"name\": \"{0}\",", g.Name)
            @String.Format("\"description\": \"{0}\",", g.Description)
            @String.Format("\"win_limit\": \"{0}\",", g.WinLimit)   
            @String.Format("\"win_count\": \"{0}\",", g.WinCount())   
            @String.Format(" \"user_limit\": \"{0}\",", g.UserLimit)   
            @String.Format("\"user_count\":\"{0}\",", g.UserCount())   
            @String.Format(" \"created_date\":\"{0}\"", g.Created.ToString("yyyy-MM-dd hh:mm:ss"))
            @Html.Raw("}")  
            gameCount++;
        }
    }
        ]
}